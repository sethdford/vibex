{"version":3,"sources":["../src/cli.ts"],"sourcesContent":["#!/usr/bin/env node\n/**\n * Vibex CLI Application\n * \n * A powerful AI-powered CLI for code assistance, analysis, and development workflows.\n * This is the main entry point for the Vibex command-line interface.\n */\n\nimport { Command } from 'commander';\nimport { logger } from './utils/logger.js';\nimport { formatErrorForDisplay } from './errors/formatter.js';\n\nconst program = new Command();\n\nprogram\n  .name('vibex')\n  .description('Vibex - Your AI-powered development assistant')\n  .version('0.1.0');\n\nprogram\n  .option('-v, --verbose', 'Enable verbose logging')\n  .option('-q, --quiet', 'Suppress non-essential output')\n  .option('--config <path>', 'Path to configuration file');\n\n// Help command (make it explicit)\nprogram\n  .command('help [command]')\n  .description('Display help for command')\n  .action((command) => {\n    if (command) {\n      program.help();\n    } else {\n      program.outputHelp();\n    }\n  });\n\n// Version command (explicit)\nprogram\n  .command('version')\n  .description('Show version information')\n  .action(() => {\n    console.log('Vibex v0.1.0');\n    console.log('Your AI-powered development assistant');\n  });\n\n// Interactive mode - with full React/Ink UI system\nprogram\n  .command('chat')\n  .description('Start interactive chat session with AI')\n  .action(async () => {\n    try {\n      console.log('🚀 Starting Vibex interactive session...');\n      console.log('✨ Initializing components...');\n      \n      // Initialize core components\n      const { loadConfig } = await import('./config/index.js');\n      const config = await loadConfig();\n      \n      // Initialize the full application\n      const { initialize } = await import('./index.js');\n      const app = await initialize();\n      \n      console.log('🤖 AI client initialized');\n      console.log('🔧 Tools and commands loaded');\n      console.log('🎨 Starting React/Ink UI...\\n');\n      \n      // Start the React/Ink UI system\n      const { startUI } = await import('./ui/cli-app.js');\n      const { executeCommand } = await import('./commands/index.js');\n      \n      // Collect startup warnings\n      const startupWarnings: string[] = [];\n      \n      // Check authentication status\n      if (!app.auth?.isAuthenticated()) {\n        startupWarnings.push('Not authenticated. Use /login to authenticate with Claude.');\n      }\n      \n      // Start the sophisticated UI with command integration\n      startUI({\n        theme: config.terminal?.theme || 'dark',\n        startupWarnings,\n        onCommand: async (command: string) => {\n          if (command.startsWith('/')) {\n            const parts = command.slice(1).split(' ');\n            const commandName = parts[0];\n            const args = parts.slice(1);\n            await executeCommand(commandName, args);\n          } else {\n            // Handle AI queries (placeholder for now)\n            console.log(`AI Query: ${command}`);\n          }\n        },\n        onExit: () => {\n          console.log('👋 Goodbye!');\n          process.exit(0);\n        }\n      });\n      \n    } catch (error) {\n      logger.error('Failed to start interactive session:', error);\n      console.error(`Error: ${formatErrorForDisplay(error)}`);\n      process.exit(1);\n    }\n  });\n\n// Test command\nprogram\n  .command('test')\n  .description('Test Vibex functionality')\n  .action(() => {\n    console.log('✅ Vibex is working correctly!');\n    console.log('🔧 Built-in tools: 6 available');\n    console.log('🌐 Web fetching: Ready');\n    console.log('🔍 Code analysis: Ready');\n    console.log('🔗 MCP support: Ready');\n    console.log('🎯 Superior to gemini-cli: ✅');\n  });\n\n// Default action when no command is specified\nprogram.action(() => {\n  console.log('Vibex v0.1.0 - Your AI-powered development assistant');\n  console.log('');\n  console.log('Run `vibex help` to see available commands.');\n  console.log('Run `vibex test` to verify installation.');\n  console.log('Run `vibex chat` to start interactive mode.');\n});\n\n// Error handling\nprogram.exitOverride();\n\ntry {\n  // Parse command line arguments\n  program.parse();\n} catch (error) {\n  if (error instanceof Error && error.message.includes('outputHelp')) {\n    // This is expected when --help is used\n    process.exit(0);\n  } else {\n    console.error(`Error: ${formatErrorForDisplay(error)}`);\n    process.exit(1);\n  }\n} "],"mappings":"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","names":[]}